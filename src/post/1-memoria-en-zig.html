<!DOCTYPE html>
<html lang="es">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jakepys | Memoria en zig</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>

<body>
    <header>
        <nav>
            <a href="../index.html">‚Üê Home</a>
        </nav>
    </header>

    <main>
        <h1 id="bloques-de-memoria">Bloques de memoria</h1>
        <p>Cada proceso tiene una vista virtual de la memoria dividia en
            bloques.</p>
        <h2 id="static">Static</h2>
        <pre><code>static
-------------------------
        |       |       |
        |       |       |
        |       |       |
-------------------------
0x1000   0x1001  0x1002


Estas regienos de memoria guardan informacion
que no van a cambiar, como el caso de las constantes.
Static se le conoce como Static live time. La vida de
esos valores dura mientras el programa este en ejecucucion.</code></pre>
        <h3 id="nivel-de-contenedor">Nivel de contenedor</h3>
        <p>Variables y constantes a nivel contenedor, o globales, se almacenan
            en el bloque <strong>Static</strong></p>
        <div class="sourceCode" id="cb2">
            <pre
                class="sourceCode zig"><code class="sourceCode zig"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> c<span class="op">:</span> <span class="dt">u8</span> <span class="op">=</span> <span class="dv">42</span>;</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">var</span> v<span class="op">:</span> <span class="dt">u8</span> <span class="op">=</span> <span class="dv">13</span>;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">// c: u8        | v: u8     |       |</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">//    42        |    13     |       |</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">//              |           |       |</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x1000       0x1001      0x1002</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Como cada de esos datos en memoria ocupan 8bytes y hay 2 entonces</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">// en la memoria seria 16bits o 2 bytes. </span></span></code></pre>
        </div>
        <h3 id="constantes">Constantes</h3>
        <p>Las constantes siempre se almacenan en el bloque
            <strong>Static</strong> no importa si son globales o locales.
        </p>
        <div class="sourceCode" id="cb3">
            <pre
                class="sourceCode zig"><code class="sourceCode zig"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> f(a<span class="op">:</span> <span class="dt">u8</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">u8</span>) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">const</span> c<span class="op">:</span> <span class="dt">u8</span> <span class="op">=</span> <span class="dv">13</span>;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">//          Static</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">// c: u8        |           |       |</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">//    13        |           |       |</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">//              |           |       |</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x1000       0x1001      0x1002</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">//          Stack</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">// a: u8        | b: u8     |       |</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">//    1         |    2      |       |</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">//              |           |       |</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">// 0xff00       0xff01      0xff02</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">// Los parametros de la funcion siempre van al frame de funcion </span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">// pero para las connstantees van para el static. En el scope de </span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">// esa funcion si va estar disponible la constante, pero su direccion </span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">// de memoria va esta siempre en el static. 1 byte en el area de static </span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">// y 2 bytes en el funcion stack frame.</span></span></code></pre>
        </div>
        <h2 id="heap">Heap</h2>
        <pre><code>heap
-------------------------
        |       |       |
        |       |       |
        |       |       |
-------------------------
0x7700   0x7701  0x7702

-&gt; Direcciones aumentan

Esta es un area de memoria donde haremos asignaciones diammicas o allocator.</code></pre>
        <h2 id="asignacion-al-heap">Asignacion al heap</h2>
        <p>Cuando usamos un <strong>allocator</strong> en zig, el espacion que
            se asigna esta en el <strong>heap</strong> y solo es accesible por medio
            de un puntero.</p>
        <div class="sourceCode" id="cb5">
            <pre
                class="sourceCode zig"><code class="sourceCode zig"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> ptr<span class="op">:</span> <span class="op">*</span><span class="dt">u8</span> <span class="op">=</span> <span class="cf">try</span> allocator<span class="op">.</span>create(<span class="dt">u8</span>);</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">// El metodo create se le pasa el tipo de dato, este se utilizaa</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">// cuando queremos hacer una asignacion de 1 solo elemento, en este caso </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">// 1 byte.</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">// El try es porque puede fallar, porque si en caso el proceso se quede sin memoria.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Estas funcones de allocator siempre regresan punteros.</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">//          Static</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">// ptr: *u8     |           |       |</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">//  0x7700      |           |       |</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">//              |           |       |</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x1000       0x1001      0x1002</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">//          Heap</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">// u8           |            |       |</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">//              |            |       |</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">//              |            |       |</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">// ----------------------------------</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">// 0x7700       0x7701        0x7702 </span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">// En el caso de static al puntero ser const, pues esta se </span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">// guarda en el espacion de memoria de static, pero guarda </span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co">// la direccion de memoria en la reguion del heap donde se </span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">// va guardar ese byte. Es decir el punteo ala region del </span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">// heap de ese tipo de dato.</span></span></code></pre>
        </div>
        <h2 id="stack">Stack</h2>
        <pre><code>Stack
-------------------------
        |       |       |
        |       |       |
        |       |       |
-------------------------
0xff00   0xff01  0xff02

Direcciones disminuyen &lt;-

Region de memoria donde se van a colocar variables locales y parametros de funciones.</code></pre>
        <h2 id="nivel-de-funcion">Nivel de funcion</h2>
        <p>Variables a nivel de funcion, o locales, se almacecnan en el
            <strong>Stack</strong>, dentro del marco de la funcion.
        </p>
        <div class="sourceCode" id="cb7">
            <pre
                class="sourceCode zig"><code class="sourceCode zig"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> f(a <span class="op">:</span> <span class="dt">u8</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">u8</span>) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">var</span> v<span class="op">:</span> <span class="dt">u8</span> <span class="op">=</span> <span class="dv">13</span>;</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">// ------------------------------</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">//  a: u8   |  b: u8  |  v: u8  |</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">//      1   |      2  |     12  |</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">//          |         |         |</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">// ------------------------------</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">// 0xff00   0xff01     0xff02</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">// En el caso del stack, cuuando se hacen esta asignacion de todo </span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">// este entorno que necesita la funcion para funcionar, se conoce en </span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">// ingles como el function stack frame. Una vez la funcion termina </span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">// el function stack frame se elimina o se hace un pop. En la gran </span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">// mayoria de las arquitectura el stack crece hacia abajo o va disminuyendo.</span></span></code></pre>
        </div>

    </main>
</body>

</html>
